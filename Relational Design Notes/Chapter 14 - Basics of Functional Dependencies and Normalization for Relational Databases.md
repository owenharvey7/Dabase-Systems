### Informal Design Guidelines for Relational Databases
- Semantics of the Relational Attributes
	- Guideline 1: Informally, each tuple in a relation should represent one entity or relationship instance. 
		- Attributes of different entities (EMPLOYEEs, DEPARTMENTs, and PROECTs) should not be mixed in the same relation.
		- Only foreign keys should be used to refer to other entities.
		- Entity and relationship attributes should be kept apart as much as possible. 
	- Design a schema that can be explained easily relation by relation. The semantics of attributes should be easy to interpret. 
- Redundant information in Tuples and Update Anomalies
	- Information is stored redundantly:
		- Wastes storage.
		- Causes problems with update anomalies.
			- Insertion, deletion, and modification anomalies.
			- Update Anomaly:
				- Changing the name of project number P1 from Billing to Customer Accounting may cause this update to be made for all 100 employees working on project P1.
			- Insert Anomaly:
				- Cannot insert a project unless an employee is assigned to it. 
				- Conversely, it cannot insert an employee unless an he/she is assigned to a project.
			- Delete Anomaly:
				- When a project is deleted, it will result in deleting all the employees who work on that project. 
				- Alternately, if an employee is the sole employee on a project, deleting that employee would result in deleting the corresponding project. 
	- Guideline 2: 
		- Design a schema that doesn't suffer from the insertion, deletion, and update anomalies.
		- If there are any anomalies present, then note them so that applications can be made to take them into account. 
- Null Values in Tuples
	- Guideline 3: 
		- Relations should be designed such that their tuples will have as few null values as possible. 
		- Attributes that are NULL frequently could be placed in separate relations (with the primary key)
	- Reasons for nulls:
		- Attribute not applicable or invalid. 
		- Attribute value unknown (may exist).
		- Value known to exist, but unavailable.
- Spurious Tuples (avoid at any cost)
	- Bad designs for a relational database may result in erroneous results for certain JOIN operations. 
	- The "lossless join" property is used to guarantee meaningful results for join operations. 
	- Guideline 4: 
		- The relations should be designed to satisfy the lossless join condition,
		- No spurious tuples should be generated by doing a natural join of any relations. 
	- Two important properties of decompositions: 
		- Non-additive or losslessness of the corresponding join. 
			- Note this is extremely important and **can't** be sacrificed. 
		- Preservation of the functional dependencies. 
			- Less stringent and may be sacrificed.
### Functional Dependencies (FDs)
- Definition of Functional Dependency:
	- Are used to specify formal measures of the how good a relational design is. 
	- Keys are used to define normal forms for relations.
	- Constraints are derived from the meaning and interrelationships of the data attributes.
- A set of attributes x functionally determine a set of attributes y if the value of x determines a unique value for y. 
- x -> y holds if whenever two tuples have the same value for x, they must have the same value for y. 
- x -> y in R specifies a constraint on all relation instances r(R).
- Written as x -> y; can be displayed graphically on a relation schema as in Fiigures.
- FDs are derived from the real world constraints on the attributes.
- Example 1: 
	- SSN determines employee name: 
		- SSN -> EName
	- Project # determines project name and location:
		- PNumber -> {PName, PLocation}
	- SSN and Project number determines the hours per week that the employee works on the project. 
		- {SSN, PNumber} -> Hours
- Example 2: 
	- AN FD is a property of the attributes in the schema R. 
	- The constraint must hold on every relation instance r(R).
	- If k is a key of R, then K functionally determines all attributes in R.
		- Since there are no two distinct tuples with t1[K] = t2[k]
- Defining Fs from instances:
	- In order to define the Fs, we need to understand the meaning of the attributes involved and the relationship between them. 
	- An FD is a property of the attributes in the schema R.
	- Given (population) of a relation, all we can conclude is that an FD may exist between certain attributes.
	- We can conclude that certain FDs do not exist because there are tuples that show a violation of those dependencies. 
### Normal Forms Based on Primary Keys
- Normalization of Relations:
	- Normalization:
		- The process of decomposing unsatisfactory bad relations by breaking up their attributes into smaller relations.
	- Normal form: 
		- Condition using keys and FDs of a relation to certify whether a relation schema is in a particular normal form. 
	- 2NF, 3NF, BCNF
		- Based on keys and FDs of a relation schema. 
	- 4NF
		- Based on keys, multi-valued dependencies. 
	- 5NF
		- Based on keys, join dependencies.
- Practical use of Normal forms
	- Normalization is carried out in practice so that the resulting designs are of high quality and meet the desirable properties. 
	- The practical utility of these normal forms becomes questionable when the constraints on which they are based are hard to understand or to detect. 
	- The database designers need not normalize to the highest possible form. 
	- Denormalization:
		- The process of storing the join of a higher norma for relations as a base relation - which is in a lower normal form. 
- Definitions of Keys and attributes participating in keys
	- A **superkey** of a relation schema is a set of attributes S subset of R with the property that no two tuples t1 and t2 in any legal relation state r of R will have t1[S] = t2[S]
	- A **key K** is a superkey with the additional property that removal of any attribute from K will cause K not to be a superkey any more. 
	- If a relation schema has more than one key, each is called a **candidate** key. 
		- One of the candidate keys is arbitrarily designated to be the primary key and the others are secondary keys.
	- A **prime attribute** must be a member of some candidate key.
	- A **Nonprime attribute** is not a prime attribute that is, it's not a member of any candidate key.
- First normal form: All attributes depend on **the key**:
	- Disallows:
		- Composite attributes.
		- Multivalued attributes.
		- Nested relations: attributes whose values for an individual tuple are non-atomic. 
	- Considered to be part of the definition of a relation.
	- Most RDBMS's allow only those relations to be defined that are in first normal form. 
- Second normal form: All attributes depend on **the whole key**:
	- Uses the concepts of FDs, primary keys. 
	- Definitions: 
		- **Prime Attribute**: An attribute that is member of the primary key K. 
		- **Full functional dependency**: A FD y -> z where removal of any attribute from y means the F doesn't hold any more. 
		- Examples: 
			- {SSN, PNumber} -> Hours is a full FD since neither SSN --> Hours nor PNumber -> Hours hold.
			- {SSN, Pnumber} -> EName is not a full FD (it's called a partial dependency) since SSN -> EName also holds. 
		- A relation schema R is in second normal form (2NF) if every non-prime attribute A in R is fully functionally dependent on the primary key.
		- R can be decomposed into 2NF relations via the process of 2NF normalization or "second normalization".
- Third normal form: All attributes dpend on **Nothing but the key**:
	- **Transitive functional dependency**: A FD x-> z that can be derived from two FDs x -> y and y-> z.
	- Examples:
		- SSN -> DMGRSSN is a **transative** FD.
			- Since SSN -> DMGRSSN and DNUMBER -> DMGRSSN hold.
		- SSN -> EName is **Non-transative**
			- Since there is no set of attributes x where SSN -> x and x -> EName. 
### General Normal Form Definitions for 2NF and 3NF
-  A relation schema R is in third nominal form if it's in 2NF and no non-prime attribute A in R is transitively dependent on the primary key. 
	- R can be decomposed into 3NF relations via the process of 3NF normalization. 
### Multivalued Dependency and Fourth Normal Form
- Occurs when one attribute in a table uniquely determines another attribute, but not necessarily vice versa. It ensures that for every value of the first attribute, there is a set of values for the second attribute that can occur, independent of the other attributes in the table.
- In Fourth Normal Form (4NF), a relation is in Third Normal Form (3NF) and does not contain any non-trivial multivalued dependencies (MVDs). This means that each non-prime attribute (attribute not part of any candidate key) must be functionally dependent on every candidate key of the table and not on other non-prime attributes. 4NF helps reduce redundancy and anomalies in the database design.
### Join Dependencies and Fifth Normal Form
- Join dependencies are constraints on a relational database schema that specify a relationship between tuples in two or more relations.
- **Representation:** JDs are represented as follows: If R1, R2, ..., Rn are relations, and R is the result of a natural join of R1, R2, ..., Rn, then a join dependency exists among R1, R2, ..., Rn if and only if for every legal relation r in R, the projection of r on each of R1, R2, ..., Rn is a legal relation in the respective relation.
- Fifth Normal Form (5NF) is the highest level of normalization in database design. It ensures that a database schema is free from certain types of redundancy and dependency, specifically those related to join dependencies.
- **Characteristics:** To be in 5NF, a relation must be in Fourth Normal Form (4NF), and it must not have any join dependencies other than trivial ones. A trivial join dependency is one where a relation is joined with itself or with a subset of its attributes.
